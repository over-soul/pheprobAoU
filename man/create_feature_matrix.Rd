% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/data_utils.R
\name{create_feature_matrix}
\alias{create_feature_matrix}
\title{Create Feature Matrix for PheProb Calculation}
\usage{
create_feature_matrix(features_data, feature_type = "binary", fill_missing = 0)
}
\arguments{
\item{features_data}{Tibble with extracted features from extract_ehr_features}

\item{feature_type}{Type of feature to use as values. Options:
\itemize{
\item "binary": 1 if concept present, 0 if absent
\item "count": occurrence_count values
\item "log_count": log(occurrence_count + 1)
\item "recency": days since last occurrence (inverted)
}}

\item{fill_missing}{Value to use for missing person-concept combinations (default: 0)}
}
\value{
A matrix with:
\item{rows}{person_ids}
\item{columns}{concept_ids with concept names}
\item{values}{calculated feature values}
}
\description{
Converts extracted EHR features into a wide-format matrix suitable for
PheProb calculations.
}
\examples{
\dontrun{
features <- extract_ehr_features(c(201820, 201826, 4193704))
feature_matrix <- create_feature_matrix(features, feature_type = "binary")
}
}
